<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="./columns.css">
    <!-- Bootstrap Optional JavaScript
         jQuery first, then Popper.js, then Bootstrap JS
         referencing https://www.ryadel.com/en/electron-jquery-bootstrap-project-add-npm/ -->
    <script>
        require('popper.js')
        require('bootstrap')
    </script>
</head>

<body>
    <h1>Hello World!</h1>
    We are using node
    <script>
        document.write(process.versions.node)
    </script>,
    Chrome
    <script>
        document.write(process.versions.chrome)
    </script>,
    and Electron
    <script>
        document.write(process.versions.electron)
    </script>.

<!--   Upload button code   -->
   

<div class="align-container">
    <div class="split left">
        <div class="centered">
                <section>
                    <label>
                        Debug: select output folder
                    </label>
                    <button class="btn" onclick="gotoutput()" class="btn-default" style="background-color:#55A5B1">
                        <input id="fileoutput" type="file" style="width:240px" />
                    </button>
                </section>
                <section>
                    <label>
                        Pick a single video to upload
                    </label>
                    <button class="btn" onclick="gotvideo()" class="btn-default" style="background-color:#55A5B1">
                        <input id="fileinput2" type="file" style="width:240px"/>
                    </button>
                </section>
            </div>
        </div>
        <div class="split right">
            <div class="centered">
                <section>
                    <label>
                        Pick a folder to upload
                    </label>
                    <button class="btn" onclick="gotfolder()" class="btn-default" style="background-color:#55A5B1">
                        <input id="fileinput" type="file" style="width:240px"/>
                    </button>
                </section>
		<!-- Submit button -->
		<section>
		    <label>
		        Submit for processing
		    </label>
		    <button class="btn" onclick="submit()" class="btn-default" style="background-color:#55A5B1">
		    </button>
		</section>
            </div>
        </div>
        <script>
	  const { ipcRenderer } = require('electron');
	  
            function gotvideo () { alert('thanks for the video') }
            function gotfolder () { alert('thanks for the folder') }
            function gotoutput () { alert('thanks for the output') }
	    function submit () {
		// Get the input and output paths
		var in_elt = document.getElementById('fileinput');
		var out_elt = document.getElementById('fileoutput');
		var in_path = in_elt.files[0].path;
		var out_path = out_elt.files[0].path;
		
		if (!(in_path && out_path)) {
		    alert('Please select an input and output folder.');
		    return;
		}

                // Clear the input and output file fields
		in_elt.value = '';
		out_elt.value = '';

		// Send the data to the backend
		ipcRenderer.send('submit-job', {input: in_path, output: out_path});
	    }
        </script>
    </div>
     
    <h3>Ping the Python process!</h3>
    <p id="pingResponse"></p>
    <button type="button" id="pingPython">ping</button>

    <!-- <section>
        <div class="centered-container">
            <label class="margin-right">
                Pick a .png or .jpg file:
                <input id="fileinput" type="file"/>
            </label>
        </div>
    </section> -->
    
    <section class="centered-container">
        <div style="max-width: 550px">
            <canvas id="inputcanvas"></canvas>
        </div>
    </section>
</body>

</html>
    <script>
        require('./index_script.js')
    </script>
</body>
